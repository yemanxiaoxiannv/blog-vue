{"remainingRequest":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\DELL\\Desktop\\one-web\\src\\views\\SignIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\DELL\\Desktop\\one-web\\src\\views\\SignIn.vue","mtime":1576543734000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyRHRvOiB7CiAgICAgICAgbW9iaWxlOiAnJywKICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgY29kZTogJycKICAgICAgfSwKICAgICAgdG9rZW46ICcnCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5heGlvcy5nZXQodGhpcy5HTE9CQUwuYmFzZVVybCArICcvY29kZScsIHsKICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOwogICAgICB2YXIgaW1nID0gX3RoaXMuJHJlZnMuY29kZUltZzsKICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHJlcy5kYXRhKTsKICAgICAgaW1nLnNyYyA9IHVybDsKICAgICAgY29uc29sZS5sb2cocmVzLmhlYWRlcnMpOyAvL+WPluW+l+WQjuWPsOmAmui/h+WTjeW6lOWktOi/lOWbnueahHNlc3Npb25JZOeahOWAvAoKICAgICAgX3RoaXMudG9rZW4gPSByZXMuaGVhZGVyc1snYWNjZXNzLXRva2VuJ107CiAgICAgIGNvbnNvbGUubG9nKF90aGlzLnRva2VuKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgc2lnbkluOiBmdW5jdGlvbiBzaWduSW4odXNlckR0bykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuYXhpb3MoewogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIHVybDogdGhpcy5HTE9CQUwuYmFzZVVybCArICcvdXNlci9zaWduLWluJywKICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEdG8pLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdBY2Nlc3MtVG9rZW4nOiB0aGlzLnRva2VuIC8v5bCGdG9rZW7mlL7lnKjor7fmsYLlpLTluKbliLDlkI7nq68KCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEubXNnID09PSAn5oiQ5YqfJykgewogICAgICAgICAgYWxlcnQoJ+eZu+W9leaIkOWKnycpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeShyZXMuZGF0YS5kYXRhKSk7CgogICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgnLycpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydChyZXMuZGF0YS5tc2cpOwogICAgICAgICAgX3RoaXMyLnVzZXJEdG8uY29kZSA9ICcnOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmF4aW9zLmdldCh0aGlzLkdMT0JBTC5iYXNlVXJsICsgJy9jb2RlJywgewogICAgICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgdmFyIGltZyA9IF90aGlzMy4kcmVmcy5jb2RlSW1nOwogICAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChyZXMuZGF0YSk7CiAgICAgICAgaW1nLnNyYyA9IHVybDsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["SignIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAkBA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA;AACA,QAAA,MAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA,EAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OADA;AAMA,MAAA,KAAA,EAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,OAXA,qBAWA;AAAA;;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,KAAA,MAAA,CAAA,OAAA,GAAA,OAAA,EAAA;AAAA,MAAA,YAAA,EAAA;AAAA,KAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA,UAAA,GAAA,GAAA,KAAA,CAAA,KAAA,CAAA,OAAA;AACA,UAAA,GAAA,GAAA,MAAA,CAAA,GAAA,CAAA,eAAA,CAAA,GAAA,CAAA,IAAA,CAAA;AACA,MAAA,GAAA,CAAA,GAAA,GAAA,GAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,EALA,CAMA;;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,OAAA,CAAA,cAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,KAAA;AACA,KATA;AAUA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,kBACA,OADA,EACA;AAAA;;AACA,WAAA,KAAA,CAAA;AACA,QAAA,MAAA,EAAA,MADA;AAEA,QAAA,GAAA,EAAA,KAAA,MAAA,CAAA,OAAA,GAAA,eAFA;AAGA,QAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,OAAA,CAHA;AAIA,QAAA,OAAA,EAAA;AACA,0BAAA,KAAA,KADA,CACA;;AADA;AAJA,OAAA,EAOA,IAPA,CAOA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,GAAA,KAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA;;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA,SAJA,MAIA;AACA,UAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,GAAA,EAAA;AACA;AACA,OAhBA;AAiBA,KAnBA;AAoBA,IAAA,OApBA,qBAoBA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,KAAA,MAAA,CAAA,OAAA,GAAA,OAAA,EAAA;AAAA,QAAA,YAAA,EAAA;AAAA,OAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,YAAA,GAAA,GAAA,MAAA,CAAA,KAAA,CAAA,OAAA;AACA,YAAA,GAAA,GAAA,MAAA,CAAA,GAAA,CAAA,eAAA,CAAA,GAAA,CAAA,IAAA,CAAA;AACA,QAAA,GAAA,CAAA,GAAA,GAAA,GAAA;AACA,OALA;AAMA;AA3BA;AAvBA,CAAA","sourcesContent":["<template>\n\t<div id=\"bg\">\n\t\t<router-link to=\"/\">首页</router-link>\n\t\t<div class=\"login-box\">\n\t\t\t<form class=\"login-form\">\n\t\t\t\t<input type=\"text\" v-model=\"userDto.mobile\" id=\"mobile\" />\n\t\t\t\t<input type=\"password\" v-model=\"userDto.password\" />\n\t\t\t\t<div class=\"code-box\">\n\t\t\t\t\t<input type=\"text\" v-model=\"userDto.code\" class=\"code\" />\n\t\t\t\t\t<img class=\"verify\" @click.prevent=\"refresh\" ref=\"codeImg\" />\n\t\t\t\t</div>\n\t\t\t\t<input type=\"button\" class=\"btn btn-lg dark-fill\" value=\"登录\" @click=\"signIn(userDto)\" />\n\t\t\t\t<router-link to=\"/sign-up\">没有账号？去注册</router-link>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tuserDto: {\n\t\t\t\tmobile: '',\n\t\t\t\tpassword: '',\n\t\t\t\tcode: ''\n\t\t\t},\n\t\t\ttoken: ''\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.axios.get(this.GLOBAL.baseUrl + '/code', { responseType: 'blob' }).then(res => {\n\t\t\t// console.log(res);\n\t\t\tvar img = this.$refs.codeImg;\n\t\t\tlet url = window.URL.createObjectURL(res.data);\n\t\t\timg.src = url;\n\t\t\tconsole.log(res.headers);\n\t\t\t//取得后台通过响应头返回的sessionId的值\n\t\t\tthis.token = res.headers['access-token'];\n\t\t\tconsole.log(this.token);\n\t\t});\n\t},\n\tmethods: {\n\t\tsignIn(userDto) {\n\t\t\tthis.axios({\n\t\t\t\tmethod: 'post',\n\t\t\t\turl: this.GLOBAL.baseUrl + '/user/sign-in',\n\t\t\t\tdata: JSON.stringify(this.userDto),\n\t\t\t\theaders: {\n\t\t\t\t\t'Access-Token': this.token  //将token放在请求头带到后端\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif (res.data.msg === '成功') {\n\t\t\t\t\talert('登录成功');\n\t\t\t\t\tlocalStorage.setItem('user', JSON.stringify(res.data.data));\n\t\t\t\t\tthis.$router.push('/');\n\t\t\t\t} else {\n\t\t\t\t\talert(res.data.msg);\n\t\t\t\t\tthis.userDto.code = '';\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\trefresh() {\n\t\t\tthis.axios.get(this.GLOBAL.baseUrl + '/code', { responseType: 'blob' }).then(res => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tvar img = this.$refs.codeImg;\n\t\t\t\tlet url = window.URL.createObjectURL(res.data);\n\t\t\t\timg.src = url;\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n<style scoped>\n#bg {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-image: url(../assets/img/topic.png);\n}\n.login-box {\n\twidth: 450px;\n\theight: 300px;\n\tborder: 2px solid rgb(170, 208, 95);\n\tborder-radius: 10px;\n\tbackground-color: rgb(170, 208, 95, 0.6);\n\tposition: absolute;\n\ttop: 200px;\n\tleft: 30%;\n}\n.login-form {\n\tpadding-top: 20px;\n\twidth: 70%;\n\tmargin: 0 auto;\n\ttext-align: left;\n}\n.login-form input {\n\twidth: 100%;\n\theight: 35px;\n\toutline: none;\n\tborder: none;\n\tmargin-bottom: 10px;\n\tborder-radius: 5px;\n}\n.code-box {\n\tdisplay: flex;\n\tmargin-top: 10px;\n\tmargin-bottom: 20px;\n\tjustify-content: space-between;\n}\n.verify {\n\tflex: 0 0 50%;\n\theight: 40px;\n}\n.verify:hover {\n\tcursor: pointer;\n}\n.code {\n\tflex: 0 0 40%;\n\theight: 40px;\n}\na {\n\tcolor: #008b8b;\n\tfont-weight: 700;\n}\n</style>\n"],"sourceRoot":"src/views"}]}
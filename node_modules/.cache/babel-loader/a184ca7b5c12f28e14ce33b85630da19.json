{"remainingRequest":"D:\\vue-app\\blog\\node_modules\\babel-loader\\lib\\index.js!D:\\vue-app\\blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue-app\\blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue-app\\blog\\src\\views\\WriteArticle\\components\\ArticleDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue-app\\blog\\src\\views\\WriteArticle\\components\\ArticleDetail.vue","mtime":1576543734000},{"path":"D:\\vue-app\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-app\\blog\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vue-app\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-app\\blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgcXVpbGxFZGl0b3IgfSBmcm9tICJ2dWUtcXVpbGwtZWRpdG9yIjsgLy/osIPnlKjnvJbovpHlmagKCmltcG9ydCAncXVpbGwvZGlzdC9xdWlsbC5jb3JlLmNzcyc7CmltcG9ydCAncXVpbGwvZGlzdC9xdWlsbC5zbm93LmNzcyc7CmltcG9ydCAncXVpbGwvZGlzdC9xdWlsbC5idWJibGUuY3NzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBcnRpY2xlRGV0YWlsJywKICBjb21wb25lbnRzOiB7CiAgICBxdWlsbEVkaXRvcjogcXVpbGxFZGl0b3IKICB9LAogIHByb3BzOiB7CiAgICBpc0VkaXQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgImRlZmF1bHQiOiBmYWxzZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBvc3RGb3JtOiB7CiAgICAgICAgdXNlcklkOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS51c2VyKS5pZCwKICAgICAgICB0b3BpY0lkOiAnJywKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgc3VtbWFyeTogJycsCiAgICAgICAgdGh1bWJuYWlsOiAnJywKICAgICAgICBjb250ZW50OiAiPHA+PC9wPjxwPjxicj48L3A+PG9sPjxsaT48c3Ryb25nPjxlbT5PciBkcmFnL3Bhc3RlIGFuIGltYWdlIGhlcmUuPC9lbT48L3N0cm9uZz48L2xpPjxsaT48c3Ryb25nPjxlbT5yZXJldzwvZW0+PC9zdHJvbmc+PC9saT48bGk+PHN0cm9uZz48ZW0+cnRyZXRlPC9lbT48L3N0cm9uZz48L2xpPjxsaT48c3Ryb25nPjxlbT50eXRyeXRyPC9lbT48L3N0cm9uZz48L2xpPjxsaT48c3Ryb25nPjxlbT51eXR1PC9lbT48L3N0cm9uZz48L2xpPjwvb2w+IgogICAgICB9LAogICAgICBlZGl0b3JPcHRpb246IHt9LAogICAgICB0b3BpY19saXN0OiBbIkRlbW8iLCAiRGVtbyIsICJEZW1vIl0KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5heGlvcy5nZXQodGhpcy5HTE9CQUwuYmFzZVVybCArICcvdG9waWMvbGlzdCcsIHsKICAgICAgICBwYXJhbXM6IHt9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnRvcGljX2xpc3QgPSByZXMuZGF0YS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMucG9zdEZvcm0pOwogICAgICB0aGlzLmF4aW9zLnBvc3QodGhpcy5HTE9CQUwuYmFzZVVybCArICcvYXJ0aWNsZS93cml0ZScsIHRoaXMucG9zdEZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChfdGhpczIucG9zdEZvcm0udGl0bGUgPT09ICcnKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UuZXJyb3IoJ+ebuOWFs+WGheWuueS4jeiDveS4uuepuicpOwoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKCiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDEpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICflj5HooajmiJDlip8nLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwoKICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzMi5wb3N0Rm9ybS51c2VySWQpOwoKICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goewogICAgICAgICAgICBwYXRoOiAnL3VzZXJfZGV0YWlsLycgKyBfdGhpczIucG9zdEZvcm0udXNlcklkCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmVycm9yKCfmnI3liqHlmajlh7rlsI/lt67vvIzor7fph43or5UnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9uRWRpdG9yUmVhZHk6IGZ1bmN0aW9uIG9uRWRpdG9yUmVhZHkoZWRpdG9yKSB7Ly8g5YeG5aSH57yW6L6R5ZmoCiAgICB9LAogICAgb25FZGl0b3JCbHVyOiBmdW5jdGlvbiBvbkVkaXRvckJsdXIoKSB7fSwKICAgIC8vIOWkseWOu+eEpueCueS6i+S7tgogICAgb25FZGl0b3JGb2N1czogZnVuY3Rpb24gb25FZGl0b3JGb2N1cygpIHt9LAogICAgLy8g6I635b6X54Sm54K55LqL5Lu2CiAgICBvbkVkaXRvckNoYW5nZTogZnVuY3Rpb24gb25FZGl0b3JDaGFuZ2UoKSB7fSwKICAgIC8vIOWGheWuueaUueWPmOS6i+S7tgogICAgdXBsb2FkU3VjY2VzczogZnVuY3Rpb24gdXBsb2FkU3VjY2VzcyhyZXNwb25zZSwgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwoKICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDApIHsKICAgICAgICB0aGlzLnBvc3RGb3JtLnRodW1ibmFpbCA9IHJlc3BvbnNlLm1zZzsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfkuIrkvKDmiJDlip8nLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBlZGl0b3I6IGZ1bmN0aW9uIGVkaXRvcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJlZnMubXlRdWlsbEVkaXRvci5xdWlsbDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["ArticleDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div style=\"margin-top: 150px\">\n    <el-form ref=\"postForm\" :model=\"postForm\" class=\"form-container\" :span=\"24\">\n\n      <div class=\"createPost-main-container\">\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item style=\"margin-bottom: 40px;\" prop=\"title\">\n              <el-input v-model=\"postForm.title\" :maxlength=\"100\" name=\"name\" placeholder=\"请输入文章标题\" required/>\n            </el-form-item>\n\n            <div class=\"postInfo-container\">\n              <el-row>\n                <el-col :span=\"4\">\n                  <el-form-item label-width=\"60px\" label=\"作者:\" class=\"postInfo-container-item\">\n                    <el-input v-model=\"postForm.author\" placeholder=\"作者\"/>\n                  </el-form-item>\n                </el-col>\n\n                <el-col :span=\"8\">\n                  <el-form-item label-width=\"60px\" label=\"话题:\" class=\"postInfo-container-item\">\n                    <el-select v-model=\"postForm.topicId\" placeholder=\"请选择\">\n                      <el-option\n                        v-for=\"item in topic_list\"\n                        :key=\"item.id\"\n                        :label=\"item.topicName\"\n                        :value=\"item.id\">\n                      </el-option>\n                    </el-select>\n                  </el-form-item>\n                </el-col>\n              </el-row>\n            </div>\n          </el-col>\n        </el-row>\n\n        <el-form-item style=\"margin-bottom: 40px;\" label-width=\"60px\" label=\"总结:\">\n          <el-input v-model=\"postForm.summary\" :rows=\"1\" type=\"textarea\" class=\"article-textarea\" autosize\n                    placeholder=\"请输入总结\"/>\n        </el-form-item>\n\n        <el-form-item prop=\"content\" style=\"margin-bottom: 30px;\">\n          <quill-editor\n            v-model=\"postForm.content\"\n            ref=\"myQuillEditor\"\n            :options=\"editorOption\"\n            @blur=\"onEditorBlur($event)\"\n            @focus=\"onEditorFocus($event)\"\n            @change=\"onEditorChange($event)\"/>\n        </el-form-item>\n      </div>\n      <el-upload\n        class=\"upload-demo\"\n        drag\n        action=\"http://localhost:9091/api/upload\"\n        name=\"filename\"\n        :on-success=\"uploadSuccess\">\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">将封面拖到此处，或<em>点击上传</em></div>\n      </el-upload>\n      <el-button @click=\"submitForm\">发布文章</el-button>\n    </el-form>\n  </div>\n</template>\n\n<script>\n  import {quillEditor} from \"vue-quill-editor\"; //调用编辑器\n  import 'quill/dist/quill.core.css'\n  import 'quill/dist/quill.snow.css'\n  import 'quill/dist/quill.bubble.css'\n\n  export default {\n    name: 'ArticleDetail',\n    components: {quillEditor},\n    props: {\n      isEdit: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        postForm: {\n          userId: JSON.parse(localStorage.user).id,\n          topicId: '',\n          title: '',\n          summary: '',\n          thumbnail: '',\n          content: `<p></p><p><br></p><ol><li><strong><em>Or drag/paste an image here.</em></strong></li><li><strong><em>rerew</em></strong></li><li><strong><em>rtrete</em></strong></li><li><strong><em>tytrytr</em></strong></li><li><strong><em>uytu</em></strong></li></ol>`\n        },\n        editorOption: {},\n        topic_list: [\n          \"Demo\", \"Demo\", \"Demo\",\n        ]\n      }\n    },\n    mounted() {\n      this.init()\n    },\n    methods: {\n      init() {\n        this.axios.get(this.GLOBAL.baseUrl + '/topic/list', {\n          params: {}\n        }).then(res => {\n          this.topic_list = res.data.data\n        });\n      },\n      submitForm() {\n        console.log(this.postForm)\n\n        this.axios.post(this.GLOBAL.baseUrl + '/article/write',this.postForm).then(res => {\n          if (this.postForm.title === '') {\n            this.$message.error('相关内容不能为空')\n            return\n          }\n          console.log(res.data);\n          if (res.data.code === 1) {\n            this.$message({\n              message: '发表成功',\n              type: 'success'\n            });\n            console.log(this.postForm.userId);\n            this.$router.push({path: '/user_detail/' + this.postForm.userId})\n          } else {\n            this.$message.error('服务器出小差，请重试');\n          }\n        });\n      },\n      onEditorReady(editor) { // 准备编辑器\n\n      },\n      onEditorBlur() {\n      }, // 失去焦点事件\n      onEditorFocus() {\n      }, // 获得焦点事件\n      onEditorChange() {\n      }, // 内容改变事件\n      uploadSuccess(response, file, fileList) {\n        console.log(response)\n        if (response.code === 0) {\n          this.postForm.thumbnail = response.msg\n          this.$message({\n            message: '上传成功',\n            type: 'success'\n          });\n        }\n      }\n    },\n    computed: {\n      editor() {\n        return this.$refs.myQuillEditor.quill;\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .form-container {\n    margin-top: 50px;\n  }\n\n  .el-dropdown-link {\n    cursor: pointer;\n    color: #409EFF;\n  }\n\n  .el-icon-arrow-down {\n    font-size: 12px;\n  }\n</style>\n"],"sourceRoot":"src/views/WriteArticle/components"}]}
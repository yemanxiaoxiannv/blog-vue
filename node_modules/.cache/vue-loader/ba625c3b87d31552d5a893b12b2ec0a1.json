{"remainingRequest":"/home/jun/programming/work/one-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jun/programming/work/one-web/src/views/SignIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jun/programming/work/one-web/src/views/SignIn.vue","mtime":1574670943000},{"path":"/home/jun/programming/work/one-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jun/programming/work/one-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jun/programming/work/one-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jun/programming/work/one-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQoJZGF0YSgpIHsNCgkJcmV0dXJuIHsNCgkJCXVzZXJEdG86IHsNCgkJCQltb2JpbGU6ICcnLA0KCQkJCXBhc3N3b3JkOiAnJywNCgkJCQljb2RlOiAnJw0KCQkJfSwNCgkJCXRva2VuOiAnJw0KCQl9Ow0KCX0sDQoJY3JlYXRlZCgpIHsNCgkJdGhpcy5heGlvcy5nZXQodGhpcy5HTE9CQUwuYmFzZVVybCArICcvY29kZScsIHsgcmVzcG9uc2VUeXBlOiAnYmxvYicgfSkudGhlbihyZXMgPT4gew0KCQkJLy8gY29uc29sZS5sb2cocmVzKTsNCgkJCXZhciBpbWcgPSB0aGlzLiRyZWZzLmNvZGVJbWc7DQoJCQlsZXQgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwocmVzLmRhdGEpOw0KCQkJaW1nLnNyYyA9IHVybDsNCgkJCWNvbnNvbGUubG9nKHJlcy5oZWFkZXJzKTsNCgkJCS8v5Y+W5b6X5ZCO5Y+w6YCa6L+H5ZON5bqU5aS06L+U5Zue55qEc2Vzc2lvbklk55qE5YC8DQoJCQl0aGlzLnRva2VuID0gcmVzLmhlYWRlcnNbJ2FjY2Vzcy10b2tlbiddOw0KCQkJY29uc29sZS5sb2codGhpcy50b2tlbik7DQoJCX0pOw0KCX0sDQoJbWV0aG9kczogew0KCQlzaWduSW4odXNlckR0bykgew0KCQkJdGhpcy5heGlvcyh7DQoJCQkJbWV0aG9kOiAncG9zdCcsDQoJCQkJdXJsOiB0aGlzLkdMT0JBTC5iYXNlVXJsICsgJy91c2VyL3NpZ24taW4nLA0KCQkJCWRhdGE6IEpTT04uc3RyaW5naWZ5KHRoaXMudXNlckR0byksDQoJCQkJaGVhZGVyczogew0KCQkJCQknQWNjZXNzLVRva2VuJzogdGhpcy50b2tlbiAgLy/lsIZ0b2tlbuaUvuWcqOivt+axguWktOW4puWIsOWQjuerrw0KCQkJCX0NCgkJCX0pLnRoZW4ocmVzID0+IHsNCgkJCQlpZiAocmVzLmRhdGEubXNnID09PSAn5oiQ5YqfJykgew0KCQkJCQlhbGVydCgn55m75b2V5oiQ5YqfJyk7DQoJCQkJCWxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSkpOw0KCQkJCQl0aGlzLiRyb3V0ZXIucHVzaCgnLycpOw0KCQkJCX0gZWxzZSB7DQoJCQkJCWFsZXJ0KHJlcy5kYXRhLm1zZyk7DQoJCQkJCXRoaXMudXNlckR0by5jb2RlID0gJyc7DQoJCQkJfQ0KCQkJfSk7DQoJCX0sDQoJCXJlZnJlc2goKSB7DQoJCQl0aGlzLmF4aW9zLmdldCh0aGlzLkdMT0JBTC5iYXNlVXJsICsgJy9jb2RlJywgeyByZXNwb25zZVR5cGU6ICdibG9iJyB9KS50aGVuKHJlcyA9PiB7DQoJCQkJY29uc29sZS5sb2cocmVzKTsNCgkJCQl2YXIgaW1nID0gdGhpcy4kcmVmcy5jb2RlSW1nOw0KCQkJCWxldCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChyZXMuZGF0YSk7DQoJCQkJaW1nLnNyYyA9IHVybDsNCgkJCX0pOw0KCQl9DQoJfQ0KfTsNCg=="},{"version":3,"sources":["SignIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignIn.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div id=\"bg\">\r\n\t\t<router-link to=\"/\">首页</router-link>\r\n\t\t<div class=\"login-box\">\r\n\t\t\t<form class=\"login-form\">\r\n\t\t\t\t<input type=\"text\" v-model=\"userDto.mobile\" id=\"mobile\" />\r\n\t\t\t\t<input type=\"password\" v-model=\"userDto.password\" />\r\n\t\t\t\t<div class=\"code-box\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"userDto.code\" class=\"code\" />\r\n\t\t\t\t\t<img class=\"verify\" @click.prevent=\"refresh\" ref=\"codeImg\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<input type=\"button\" class=\"btn btn-lg dark-fill\" value=\"登录\" @click=\"signIn(userDto)\" />\r\n\t\t\t\t<router-link to=\"/sign-up\">没有账号？去注册</router-link>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuserDto: {\r\n\t\t\t\tmobile: '',\r\n\t\t\t\tpassword: '',\r\n\t\t\t\tcode: ''\r\n\t\t\t},\r\n\t\t\ttoken: ''\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.axios.get(this.GLOBAL.baseUrl + '/code', { responseType: 'blob' }).then(res => {\r\n\t\t\t// console.log(res);\r\n\t\t\tvar img = this.$refs.codeImg;\r\n\t\t\tlet url = window.URL.createObjectURL(res.data);\r\n\t\t\timg.src = url;\r\n\t\t\tconsole.log(res.headers);\r\n\t\t\t//取得后台通过响应头返回的sessionId的值\r\n\t\t\tthis.token = res.headers['access-token'];\r\n\t\t\tconsole.log(this.token);\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tsignIn(userDto) {\r\n\t\t\tthis.axios({\r\n\t\t\t\tmethod: 'post',\r\n\t\t\t\turl: this.GLOBAL.baseUrl + '/user/sign-in',\r\n\t\t\t\tdata: JSON.stringify(this.userDto),\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Access-Token': this.token  //将token放在请求头带到后端\r\n\t\t\t\t}\r\n\t\t\t}).then(res => {\r\n\t\t\t\tif (res.data.msg === '成功') {\r\n\t\t\t\t\talert('登录成功');\r\n\t\t\t\t\tlocalStorage.setItem('user', JSON.stringify(res.data.data));\r\n\t\t\t\t\tthis.$router.push('/');\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(res.data.msg);\r\n\t\t\t\t\tthis.userDto.code = '';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\trefresh() {\r\n\t\t\tthis.axios.get(this.GLOBAL.baseUrl + '/code', { responseType: 'blob' }).then(res => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tvar img = this.$refs.codeImg;\r\n\t\t\t\tlet url = window.URL.createObjectURL(res.data);\r\n\t\t\t\timg.src = url;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n<style scoped>\r\n#bg {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground-image: url(../assets/img/topic.png);\r\n}\r\n.login-box {\r\n\twidth: 450px;\r\n\theight: 300px;\r\n\tborder: 2px solid rgb(170, 208, 95);\r\n\tborder-radius: 10px;\r\n\tbackground-color: rgb(170, 208, 95, 0.6);\r\n\tposition: absolute;\r\n\ttop: 200px;\r\n\tleft: 30%;\r\n}\r\n.login-form {\r\n\tpadding-top: 20px;\r\n\twidth: 70%;\r\n\tmargin: 0 auto;\r\n\ttext-align: left;\r\n}\r\n.login-form input {\r\n\twidth: 100%;\r\n\theight: 35px;\r\n\toutline: none;\r\n\tborder: none;\r\n\tmargin-bottom: 10px;\r\n\tborder-radius: 5px;\r\n}\r\n.code-box {\r\n\tdisplay: flex;\r\n\tmargin-top: 10px;\r\n\tmargin-bottom: 20px;\r\n\tjustify-content: space-between;\r\n}\r\n.verify {\r\n\tflex: 0 0 50%;\r\n\theight: 40px;\r\n}\r\n.verify:hover {\r\n\tcursor: pointer;\r\n}\r\n.code {\r\n\tflex: 0 0 40%;\r\n\theight: 40px;\r\n}\r\na {\r\n\tcolor: #008b8b;\r\n\tfont-weight: 700;\r\n}\r\n</style>\n"]}]}
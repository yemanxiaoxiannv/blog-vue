{"remainingRequest":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\DELL\\Desktop\\one-web\\src\\views\\WriteArticle\\components\\ArticleDetail.vue?vue&type=style&index=0&id=0ab56888&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\DELL\\Desktop\\one-web\\src\\views\\WriteArticle\\components\\ArticleDetail.vue","mtime":1576543734000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5mb3JtLWNvbnRhaW5lciB7CiAgbWFyZ2luLXRvcDogNTBweDsKfQoKLmVsLWRyb3Bkb3duLWxpbmsgewogIGN1cnNvcjogcG9pbnRlcjsKICBjb2xvcjogIzQwOUVGRjsKfQoKLmVsLWljb24tYXJyb3ctZG93biB7CiAgZm9udC1zaXplOiAxMnB4Owp9Cg=="},{"version":3,"sources":["ArticleDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6JA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ArticleDetail.vue","sourceRoot":"src/views/WriteArticle/components","sourcesContent":["<template>\n  <div style=\"margin-top: 150px\">\n    <el-form ref=\"postForm\" :model=\"postForm\" class=\"form-container\" :span=\"24\">\n\n      <div class=\"createPost-main-container\">\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item style=\"margin-bottom: 40px;\" prop=\"title\">\n              <el-input v-model=\"postForm.title\" :maxlength=\"100\" name=\"name\" placeholder=\"请输入文章标题\" required/>\n            </el-form-item>\n\n            <div class=\"postInfo-container\">\n              <el-row>\n                <el-col :span=\"4\">\n                  <el-form-item label-width=\"60px\" label=\"作者:\" class=\"postInfo-container-item\">\n                    <el-input v-model=\"postForm.author\" placeholder=\"作者\"/>\n                  </el-form-item>\n                </el-col>\n\n                <el-col :span=\"8\">\n                  <el-form-item label-width=\"60px\" label=\"话题:\" class=\"postInfo-container-item\">\n                    <el-select v-model=\"postForm.topicId\" placeholder=\"请选择\">\n                      <el-option\n                        v-for=\"item in topic_list\"\n                        :key=\"item.id\"\n                        :label=\"item.topicName\"\n                        :value=\"item.id\">\n                      </el-option>\n                    </el-select>\n                  </el-form-item>\n                </el-col>\n              </el-row>\n            </div>\n          </el-col>\n        </el-row>\n\n        <el-form-item style=\"margin-bottom: 40px;\" label-width=\"60px\" label=\"总结:\">\n          <el-input v-model=\"postForm.summary\" :rows=\"1\" type=\"textarea\" class=\"article-textarea\" autosize\n                    placeholder=\"请输入总结\"/>\n        </el-form-item>\n\n        <el-form-item prop=\"content\" style=\"margin-bottom: 30px;\">\n          <quill-editor\n            v-model=\"postForm.content\"\n            ref=\"myQuillEditor\"\n            :options=\"editorOption\"\n            @blur=\"onEditorBlur($event)\"\n            @focus=\"onEditorFocus($event)\"\n            @change=\"onEditorChange($event)\"/>\n        </el-form-item>\n      </div>\n      <el-upload\n        class=\"upload-demo\"\n        drag\n        action=\"http://localhost:9091/api/upload\"\n        name=\"filename\"\n        :on-success=\"uploadSuccess\">\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">将封面拖到此处，或<em>点击上传</em></div>\n      </el-upload>\n      <el-button @click=\"submitForm\">发布文章</el-button>\n    </el-form>\n  </div>\n</template>\n\n<script>\n  import {quillEditor} from \"vue-quill-editor\"; //调用编辑器\n  import 'quill/dist/quill.core.css'\n  import 'quill/dist/quill.snow.css'\n  import 'quill/dist/quill.bubble.css'\n\n  export default {\n    name: 'ArticleDetail',\n    components: {quillEditor},\n    props: {\n      isEdit: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        postForm: {\n          userId: JSON.parse(localStorage.user).id,\n          topicId: '',\n          title: '',\n          summary: '',\n          thumbnail: '',\n          content: `<p></p><p><br></p><ol><li><strong><em>Or drag/paste an image here.</em></strong></li><li><strong><em>rerew</em></strong></li><li><strong><em>rtrete</em></strong></li><li><strong><em>tytrytr</em></strong></li><li><strong><em>uytu</em></strong></li></ol>`\n        },\n        editorOption: {},\n        topic_list: [\n          \"Demo\", \"Demo\", \"Demo\",\n        ]\n      }\n    },\n    mounted() {\n      this.init()\n    },\n    methods: {\n      init() {\n        this.axios.get(this.GLOBAL.baseUrl + '/topic/list', {\n          params: {}\n        }).then(res => {\n          this.topic_list = res.data.data\n        });\n      },\n      submitForm() {\n        console.log(this.postForm)\n\n        this.axios.post(this.GLOBAL.baseUrl + '/article/write',this.postForm).then(res => {\n          if (this.postForm.title === '') {\n            this.$message.error('相关内容不能为空')\n            return\n          }\n          console.log(res.data);\n          if (res.data.code === 1) {\n            this.$message({\n              message: '发表成功',\n              type: 'success'\n            });\n            console.log(this.postForm.userId);\n            this.$router.push({path: '/user_detail/' + this.postForm.userId})\n          } else {\n            this.$message.error('服务器出小差，请重试');\n          }\n        });\n      },\n      onEditorReady(editor) { // 准备编辑器\n\n      },\n      onEditorBlur() {\n      }, // 失去焦点事件\n      onEditorFocus() {\n      }, // 获得焦点事件\n      onEditorChange() {\n      }, // 内容改变事件\n      uploadSuccess(response, file, fileList) {\n        console.log(response)\n        if (response.code === 0) {\n          this.postForm.thumbnail = response.msg\n          this.$message({\n            message: '上传成功',\n            type: 'success'\n          });\n        }\n      }\n    },\n    computed: {\n      editor() {\n        return this.$refs.myQuillEditor.quill;\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .form-container {\n    margin-top: 50px;\n  }\n\n  .el-dropdown-link {\n    cursor: pointer;\n    color: #409EFF;\n  }\n\n  .el-icon-arrow-down {\n    font-size: 12px;\n  }\n</style>\n"]}]}
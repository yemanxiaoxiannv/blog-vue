{"remainingRequest":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\DELL\\Desktop\\one-web\\src\\views\\SignIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\DELL\\Desktop\\one-web\\src\\views\\SignIn.vue","mtime":1576543734000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJdXNlckR0bzogewoJCQkJbW9iaWxlOiAnJywKCQkJCXBhc3N3b3JkOiAnJywKCQkJCWNvZGU6ICcnCgkJCX0sCgkJCXRva2VuOiAnJwoJCX07Cgl9LAoJY3JlYXRlZCgpIHsKCQl0aGlzLmF4aW9zLmdldCh0aGlzLkdMT0JBTC5iYXNlVXJsICsgJy9jb2RlJywgeyByZXNwb25zZVR5cGU6ICdibG9iJyB9KS50aGVuKHJlcyA9PiB7CgkJCS8vIGNvbnNvbGUubG9nKHJlcyk7CgkJCXZhciBpbWcgPSB0aGlzLiRyZWZzLmNvZGVJbWc7CgkJCWxldCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChyZXMuZGF0YSk7CgkJCWltZy5zcmMgPSB1cmw7CgkJCWNvbnNvbGUubG9nKHJlcy5oZWFkZXJzKTsKCQkJLy/lj5blvpflkI7lj7DpgJrov4flk43lupTlpLTov5Tlm57nmoRzZXNzaW9uSWTnmoTlgLwKCQkJdGhpcy50b2tlbiA9IHJlcy5oZWFkZXJzWydhY2Nlc3MtdG9rZW4nXTsKCQkJY29uc29sZS5sb2codGhpcy50b2tlbik7CgkJfSk7Cgl9LAoJbWV0aG9kczogewoJCXNpZ25Jbih1c2VyRHRvKSB7CgkJCXRoaXMuYXhpb3MoewoJCQkJbWV0aG9kOiAncG9zdCcsCgkJCQl1cmw6IHRoaXMuR0xPQkFMLmJhc2VVcmwgKyAnL3VzZXIvc2lnbi1pbicsCgkJCQlkYXRhOiBKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEdG8pLAoJCQkJaGVhZGVyczogewoJCQkJCSdBY2Nlc3MtVG9rZW4nOiB0aGlzLnRva2VuICAvL+WwhnRva2Vu5pS+5Zyo6K+35rGC5aS05bim5Yiw5ZCO56uvCgkJCQl9CgkJCX0pLnRoZW4ocmVzID0+IHsKCQkJCWlmIChyZXMuZGF0YS5tc2cgPT09ICfmiJDlip8nKSB7CgkJCQkJYWxlcnQoJ+eZu+W9leaIkOWKnycpOwoJCQkJCWxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSkpOwoJCQkJCXRoaXMuJHJvdXRlci5wdXNoKCcvJyk7CgkJCQl9IGVsc2UgewoJCQkJCWFsZXJ0KHJlcy5kYXRhLm1zZyk7CgkJCQkJdGhpcy51c2VyRHRvLmNvZGUgPSAnJzsKCQkJCX0KCQkJfSk7CgkJfSwKCQlyZWZyZXNoKCkgewoJCQl0aGlzLmF4aW9zLmdldCh0aGlzLkdMT0JBTC5iYXNlVXJsICsgJy9jb2RlJywgeyByZXNwb25zZVR5cGU6ICdibG9iJyB9KS50aGVuKHJlcyA9PiB7CgkJCQljb25zb2xlLmxvZyhyZXMpOwoJCQkJdmFyIGltZyA9IHRoaXMuJHJlZnMuY29kZUltZzsKCQkJCWxldCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChyZXMuZGF0YSk7CgkJCQlpbWcuc3JjID0gdXJsOwoJCQl9KTsKCQl9Cgl9Cn07Cg=="},{"version":3,"sources":["SignIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignIn.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<div id=\"bg\">\n\t\t<router-link to=\"/\">首页</router-link>\n\t\t<div class=\"login-box\">\n\t\t\t<form class=\"login-form\">\n\t\t\t\t<input type=\"text\" v-model=\"userDto.mobile\" id=\"mobile\" />\n\t\t\t\t<input type=\"password\" v-model=\"userDto.password\" />\n\t\t\t\t<div class=\"code-box\">\n\t\t\t\t\t<input type=\"text\" v-model=\"userDto.code\" class=\"code\" />\n\t\t\t\t\t<img class=\"verify\" @click.prevent=\"refresh\" ref=\"codeImg\" />\n\t\t\t\t</div>\n\t\t\t\t<input type=\"button\" class=\"btn btn-lg dark-fill\" value=\"登录\" @click=\"signIn(userDto)\" />\n\t\t\t\t<router-link to=\"/sign-up\">没有账号？去注册</router-link>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tuserDto: {\n\t\t\t\tmobile: '',\n\t\t\t\tpassword: '',\n\t\t\t\tcode: ''\n\t\t\t},\n\t\t\ttoken: ''\n\t\t};\n\t},\n\tcreated() {\n\t\tthis.axios.get(this.GLOBAL.baseUrl + '/code', { responseType: 'blob' }).then(res => {\n\t\t\t// console.log(res);\n\t\t\tvar img = this.$refs.codeImg;\n\t\t\tlet url = window.URL.createObjectURL(res.data);\n\t\t\timg.src = url;\n\t\t\tconsole.log(res.headers);\n\t\t\t//取得后台通过响应头返回的sessionId的值\n\t\t\tthis.token = res.headers['access-token'];\n\t\t\tconsole.log(this.token);\n\t\t});\n\t},\n\tmethods: {\n\t\tsignIn(userDto) {\n\t\t\tthis.axios({\n\t\t\t\tmethod: 'post',\n\t\t\t\turl: this.GLOBAL.baseUrl + '/user/sign-in',\n\t\t\t\tdata: JSON.stringify(this.userDto),\n\t\t\t\theaders: {\n\t\t\t\t\t'Access-Token': this.token  //将token放在请求头带到后端\n\t\t\t\t}\n\t\t\t}).then(res => {\n\t\t\t\tif (res.data.msg === '成功') {\n\t\t\t\t\talert('登录成功');\n\t\t\t\t\tlocalStorage.setItem('user', JSON.stringify(res.data.data));\n\t\t\t\t\tthis.$router.push('/');\n\t\t\t\t} else {\n\t\t\t\t\talert(res.data.msg);\n\t\t\t\t\tthis.userDto.code = '';\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\trefresh() {\n\t\t\tthis.axios.get(this.GLOBAL.baseUrl + '/code', { responseType: 'blob' }).then(res => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tvar img = this.$refs.codeImg;\n\t\t\t\tlet url = window.URL.createObjectURL(res.data);\n\t\t\t\timg.src = url;\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n<style scoped>\n#bg {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-image: url(../assets/img/topic.png);\n}\n.login-box {\n\twidth: 450px;\n\theight: 300px;\n\tborder: 2px solid rgb(170, 208, 95);\n\tborder-radius: 10px;\n\tbackground-color: rgb(170, 208, 95, 0.6);\n\tposition: absolute;\n\ttop: 200px;\n\tleft: 30%;\n}\n.login-form {\n\tpadding-top: 20px;\n\twidth: 70%;\n\tmargin: 0 auto;\n\ttext-align: left;\n}\n.login-form input {\n\twidth: 100%;\n\theight: 35px;\n\toutline: none;\n\tborder: none;\n\tmargin-bottom: 10px;\n\tborder-radius: 5px;\n}\n.code-box {\n\tdisplay: flex;\n\tmargin-top: 10px;\n\tmargin-bottom: 20px;\n\tjustify-content: space-between;\n}\n.verify {\n\tflex: 0 0 50%;\n\theight: 40px;\n}\n.verify:hover {\n\tcursor: pointer;\n}\n.code {\n\tflex: 0 0 40%;\n\theight: 40px;\n}\na {\n\tcolor: #008b8b;\n\tfont-weight: 700;\n}\n</style>\n"]}]}
{"remainingRequest":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\DELL\\Desktop\\one-web\\src\\views\\WriteArticle\\components\\ArticleDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\DELL\\Desktop\\one-web\\src\\views\\WriteArticle\\components\\ArticleDetail.vue","mtime":1576543734000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DELL\\Desktop\\one-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7cXVpbGxFZGl0b3J9IGZyb20gInZ1ZS1xdWlsbC1lZGl0b3IiOyAvL+iwg+eUqOe8lui+keWZqAppbXBvcnQgJ3F1aWxsL2Rpc3QvcXVpbGwuY29yZS5jc3MnCmltcG9ydCAncXVpbGwvZGlzdC9xdWlsbC5zbm93LmNzcycKaW1wb3J0ICdxdWlsbC9kaXN0L3F1aWxsLmJ1YmJsZS5jc3MnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FydGljbGVEZXRhaWwnLAogIGNvbXBvbmVudHM6IHtxdWlsbEVkaXRvcn0sCiAgcHJvcHM6IHsKICAgIGlzRWRpdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBvc3RGb3JtOiB7CiAgICAgICAgdXNlcklkOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS51c2VyKS5pZCwKICAgICAgICB0b3BpY0lkOiAnJywKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgc3VtbWFyeTogJycsCiAgICAgICAgdGh1bWJuYWlsOiAnJywKICAgICAgICBjb250ZW50OiBgPHA+PC9wPjxwPjxicj48L3A+PG9sPjxsaT48c3Ryb25nPjxlbT5PciBkcmFnL3Bhc3RlIGFuIGltYWdlIGhlcmUuPC9lbT48L3N0cm9uZz48L2xpPjxsaT48c3Ryb25nPjxlbT5yZXJldzwvZW0+PC9zdHJvbmc+PC9saT48bGk+PHN0cm9uZz48ZW0+cnRyZXRlPC9lbT48L3N0cm9uZz48L2xpPjxsaT48c3Ryb25nPjxlbT50eXRyeXRyPC9lbT48L3N0cm9uZz48L2xpPjxsaT48c3Ryb25nPjxlbT51eXR1PC9lbT48L3N0cm9uZz48L2xpPjwvb2w+YAogICAgICB9LAogICAgICBlZGl0b3JPcHRpb246IHt9LAogICAgICB0b3BpY19saXN0OiBbCiAgICAgICAgIkRlbW8iLCAiRGVtbyIsICJEZW1vIiwKICAgICAgXQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0KCkgewogICAgICB0aGlzLmF4aW9zLmdldCh0aGlzLkdMT0JBTC5iYXNlVXJsICsgJy90b3BpYy9saXN0JywgewogICAgICAgIHBhcmFtczoge30KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudG9waWNfbGlzdCA9IHJlcy5kYXRhLmRhdGEKICAgICAgfSk7CiAgICB9LAogICAgc3VibWl0Rm9ybSgpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5wb3N0Rm9ybSkKCiAgICAgIHRoaXMuYXhpb3MucG9zdCh0aGlzLkdMT0JBTC5iYXNlVXJsICsgJy9hcnRpY2xlL3dyaXRlJyx0aGlzLnBvc3RGb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHRoaXMucG9zdEZvcm0udGl0bGUgPT09ICcnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfnm7jlhbPlhoXlrrnkuI3og73kuLrnqbonKQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMSkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICflj5HooajmiJDlip8nLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc29sZS5sb2codGhpcy5wb3N0Rm9ybS51c2VySWQpOwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvdXNlcl9kZXRhaWwvJyArIHRoaXMucG9zdEZvcm0udXNlcklkfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5pyN5Yqh5Zmo5Ye65bCP5beu77yM6K+36YeN6K+VJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBvbkVkaXRvclJlYWR5KGVkaXRvcikgeyAvLyDlh4blpIfnvJbovpHlmagKCiAgICB9LAogICAgb25FZGl0b3JCbHVyKCkgewogICAgfSwgLy8g5aSx5Y6754Sm54K55LqL5Lu2CiAgICBvbkVkaXRvckZvY3VzKCkgewogICAgfSwgLy8g6I635b6X54Sm54K55LqL5Lu2CiAgICBvbkVkaXRvckNoYW5nZSgpIHsKICAgIH0sIC8vIOWGheWuueaUueWPmOS6i+S7tgogICAgdXBsb2FkU3VjY2VzcyhyZXNwb25zZSwgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAwKSB7CiAgICAgICAgdGhpcy5wb3N0Rm9ybS50aHVtYm5haWwgPSByZXNwb25zZS5tc2cKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfkuIrkvKDmiJDlip8nLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBlZGl0b3IoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyZWZzLm15UXVpbGxFZGl0b3IucXVpbGw7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["ArticleDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArticleDetail.vue","sourceRoot":"src/views/WriteArticle/components","sourcesContent":["<template>\n  <div style=\"margin-top: 150px\">\n    <el-form ref=\"postForm\" :model=\"postForm\" class=\"form-container\" :span=\"24\">\n\n      <div class=\"createPost-main-container\">\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item style=\"margin-bottom: 40px;\" prop=\"title\">\n              <el-input v-model=\"postForm.title\" :maxlength=\"100\" name=\"name\" placeholder=\"请输入文章标题\" required/>\n            </el-form-item>\n\n            <div class=\"postInfo-container\">\n              <el-row>\n                <el-col :span=\"4\">\n                  <el-form-item label-width=\"60px\" label=\"作者:\" class=\"postInfo-container-item\">\n                    <el-input v-model=\"postForm.author\" placeholder=\"作者\"/>\n                  </el-form-item>\n                </el-col>\n\n                <el-col :span=\"8\">\n                  <el-form-item label-width=\"60px\" label=\"话题:\" class=\"postInfo-container-item\">\n                    <el-select v-model=\"postForm.topicId\" placeholder=\"请选择\">\n                      <el-option\n                        v-for=\"item in topic_list\"\n                        :key=\"item.id\"\n                        :label=\"item.topicName\"\n                        :value=\"item.id\">\n                      </el-option>\n                    </el-select>\n                  </el-form-item>\n                </el-col>\n              </el-row>\n            </div>\n          </el-col>\n        </el-row>\n\n        <el-form-item style=\"margin-bottom: 40px;\" label-width=\"60px\" label=\"总结:\">\n          <el-input v-model=\"postForm.summary\" :rows=\"1\" type=\"textarea\" class=\"article-textarea\" autosize\n                    placeholder=\"请输入总结\"/>\n        </el-form-item>\n\n        <el-form-item prop=\"content\" style=\"margin-bottom: 30px;\">\n          <quill-editor\n            v-model=\"postForm.content\"\n            ref=\"myQuillEditor\"\n            :options=\"editorOption\"\n            @blur=\"onEditorBlur($event)\"\n            @focus=\"onEditorFocus($event)\"\n            @change=\"onEditorChange($event)\"/>\n        </el-form-item>\n      </div>\n      <el-upload\n        class=\"upload-demo\"\n        drag\n        action=\"http://localhost:9091/api/upload\"\n        name=\"filename\"\n        :on-success=\"uploadSuccess\">\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">将封面拖到此处，或<em>点击上传</em></div>\n      </el-upload>\n      <el-button @click=\"submitForm\">发布文章</el-button>\n    </el-form>\n  </div>\n</template>\n\n<script>\n  import {quillEditor} from \"vue-quill-editor\"; //调用编辑器\n  import 'quill/dist/quill.core.css'\n  import 'quill/dist/quill.snow.css'\n  import 'quill/dist/quill.bubble.css'\n\n  export default {\n    name: 'ArticleDetail',\n    components: {quillEditor},\n    props: {\n      isEdit: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        postForm: {\n          userId: JSON.parse(localStorage.user).id,\n          topicId: '',\n          title: '',\n          summary: '',\n          thumbnail: '',\n          content: `<p></p><p><br></p><ol><li><strong><em>Or drag/paste an image here.</em></strong></li><li><strong><em>rerew</em></strong></li><li><strong><em>rtrete</em></strong></li><li><strong><em>tytrytr</em></strong></li><li><strong><em>uytu</em></strong></li></ol>`\n        },\n        editorOption: {},\n        topic_list: [\n          \"Demo\", \"Demo\", \"Demo\",\n        ]\n      }\n    },\n    mounted() {\n      this.init()\n    },\n    methods: {\n      init() {\n        this.axios.get(this.GLOBAL.baseUrl + '/topic/list', {\n          params: {}\n        }).then(res => {\n          this.topic_list = res.data.data\n        });\n      },\n      submitForm() {\n        console.log(this.postForm)\n\n        this.axios.post(this.GLOBAL.baseUrl + '/article/write',this.postForm).then(res => {\n          if (this.postForm.title === '') {\n            this.$message.error('相关内容不能为空')\n            return\n          }\n          console.log(res.data);\n          if (res.data.code === 1) {\n            this.$message({\n              message: '发表成功',\n              type: 'success'\n            });\n            console.log(this.postForm.userId);\n            this.$router.push({path: '/user_detail/' + this.postForm.userId})\n          } else {\n            this.$message.error('服务器出小差，请重试');\n          }\n        });\n      },\n      onEditorReady(editor) { // 准备编辑器\n\n      },\n      onEditorBlur() {\n      }, // 失去焦点事件\n      onEditorFocus() {\n      }, // 获得焦点事件\n      onEditorChange() {\n      }, // 内容改变事件\n      uploadSuccess(response, file, fileList) {\n        console.log(response)\n        if (response.code === 0) {\n          this.postForm.thumbnail = response.msg\n          this.$message({\n            message: '上传成功',\n            type: 'success'\n          });\n        }\n      }\n    },\n    computed: {\n      editor() {\n        return this.$refs.myQuillEditor.quill;\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .form-container {\n    margin-top: 50px;\n  }\n\n  .el-dropdown-link {\n    cursor: pointer;\n    color: #409EFF;\n  }\n\n  .el-icon-arrow-down {\n    font-size: 12px;\n  }\n</style>\n"]}]}
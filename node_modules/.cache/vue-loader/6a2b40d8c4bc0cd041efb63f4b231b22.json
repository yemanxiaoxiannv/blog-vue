{"remainingRequest":"D:\\vue-app\\blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue-app\\blog\\src\\views\\WriteArticle\\components\\ArticleDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue-app\\blog\\src\\views\\WriteArticle\\components\\ArticleDetail.vue","mtime":1577091029978},{"path":"D:\\vue-app\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-app\\blog\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\vue-app\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-app\\blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7cXVpbGxFZGl0b3J9IGZyb20gInZ1ZS1xdWlsbC1lZGl0b3IiOyAvL+iwg+eUqOe8lui+keWZqAppbXBvcnQgJ3F1aWxsL2Rpc3QvcXVpbGwuY29yZS5jc3MnCmltcG9ydCAncXVpbGwvZGlzdC9xdWlsbC5zbm93LmNzcycKaW1wb3J0ICdxdWlsbC9kaXN0L3F1aWxsLmJ1YmJsZS5jc3MnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FydGljbGVEZXRhaWwnLAogIGNvbXBvbmVudHM6IHtxdWlsbEVkaXRvcn0sCiAgcHJvcHM6IHsKICAgIGlzRWRpdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBvc3RGb3JtOiB7CiAgICAgICAgdXNlcklkOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS51c2VyKS5pZCwKICAgICAgICB0b3BpY0lkOiAnJywKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgc3VtbWFyeTogJycsCiAgICAgICAgdGh1bWJuYWlsOiAnJywKICAgICAgfSwKICAgICAgZWRpdG9yT3B0aW9uOiB7fSwKICAgICAgdG9waWNfbGlzdDogWwogICAgICAgICJEZW1vIiwgIkRlbW8iLCAiRGVtbyIsCiAgICAgIF0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdCgpIHsKICAgICAgdGhpcy5heGlvcy5nZXQodGhpcy5HTE9CQUwuYmFzZVVybCArICcvdG9waWMvbGlzdCcsIHsKICAgICAgICBwYXJhbXM6IHt9CiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnRvcGljX2xpc3QgPSByZXMuZGF0YS5kYXRhCiAgICAgIH0pOwogICAgfSwKICAgIHN1Ym1pdEZvcm0oKSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMucG9zdEZvcm0pCgogICAgICB0aGlzLmF4aW9zLnBvc3QodGhpcy5HTE9CQUwuYmFzZVVybCArICcvYXJ0aWNsZS93cml0ZScsdGhpcy5wb3N0Rm9ybSkudGhlbihyZXMgPT4gewogICAgICAgIGlmICh0aGlzLnBvc3RGb3JtLnRpdGxlID09PSAnJykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign55u45YWz5YaF5a655LiN6IO95Li656m6JykKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDEpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn5Y+R6KGo5oiQ5YqfJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucG9zdEZvcm0udXNlcklkKTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAnL3VzZXJfZGV0YWlsLycgKyB0aGlzLnBvc3RGb3JtLnVzZXJJZH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+acjeWKoeWZqOWHuuWwj+W3ru+8jOivt+mHjeivlScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgb25FZGl0b3JSZWFkeShlZGl0b3IpIHsgLy8g5YeG5aSH57yW6L6R5ZmoCgogICAgfSwKICAgIG9uRWRpdG9yQmx1cigpIHsKICAgIH0sIC8vIOWkseWOu+eEpueCueS6i+S7tgogICAgb25FZGl0b3JGb2N1cygpIHsKICAgIH0sIC8vIOiOt+W+l+eEpueCueS6i+S7tgogICAgb25FZGl0b3JDaGFuZ2UoKSB7CiAgICB9LCAvLyDlhoXlrrnmlLnlj5jkuovku7YKICAgIHVwbG9hZFN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMCkgewogICAgICAgIHRoaXMucG9zdEZvcm0udGh1bWJuYWlsID0gcmVzcG9uc2UubXNnCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn5LiK5Lyg5oiQ5YqfJywKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZWRpdG9yKCkgewogICAgICByZXR1cm4gdGhpcy4kcmVmcy5teVF1aWxsRWRpdG9yLnF1aWxsOwogICAgfQogIH0KfQo="},{"version":3,"sources":["ArticleDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArticleDetail.vue","sourceRoot":"src/views/WriteArticle/components","sourcesContent":["<template>\n  <div style=\"margin-top: 150px\">\n    <el-form ref=\"postForm\" :model=\"postForm\" class=\"form-container\" :span=\"24\">\n\n      <div class=\"createPost-main-container\">\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item style=\"margin-bottom: 40px;\" prop=\"title\">\n              <el-input v-model=\"postForm.title\" :maxlength=\"100\" name=\"name\" placeholder=\"请输入文章标题\" required/>\n            </el-form-item>\n\n            <div class=\"postInfo-container\">\n              <el-row>\n                <el-col :span=\"4\">\n                  <el-form-item label-width=\"60px\" label=\"作者:\" class=\"postInfo-container-item\">\n                    <el-input v-model=\"postForm.author\" placeholder=\"作者\"/>\n                  </el-form-item>\n                </el-col>\n\n                <el-col :span=\"8\">\n                  <el-form-item label-width=\"60px\" label=\"话题:\" class=\"postInfo-container-item\">\n                    <el-select v-model=\"postForm.topicId\" placeholder=\"请选择\">\n                      <el-option\n                        v-for=\"item in topic_list\"\n                        :key=\"item.id\"\n                        :label=\"item.topicName\"\n                        :value=\"item.id\">\n                      </el-option>\n                    </el-select>\n                  </el-form-item>\n                </el-col>\n              </el-row>\n            </div>\n          </el-col>\n        </el-row>\n\n        <el-form-item style=\"margin-bottom: 40px;\" label-width=\"60px\" label=\"总结:\">\n          <el-input v-model=\"postForm.summary\" :rows=\"1\" type=\"textarea\" class=\"article-textarea\" autosize\n                    placeholder=\"请输入总结\"/>\n        </el-form-item>\n\n        <el-form-item prop=\"content\" style=\"margin-bottom: 30px;\">\n          <quill-editor\n            v-model=\"postForm.content\"\n            ref=\"myQuillEditor\"\n            :options=\"editorOption\"\n            @blur=\"onEditorBlur($event)\"\n            @focus=\"onEditorFocus($event)\"\n            @change=\"onEditorChange($event)\"/>\n        </el-form-item>\n      </div>\n      <el-upload\n        class=\"upload-demo\"\n        drag\n        action=\"http://localhost:9091/api/upload\"\n        name=\"filename\"\n        :on-success=\"uploadSuccess\">\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">将封面拖到此处，或<em>点击上传</em></div>\n      </el-upload>\n      <el-button @click=\"submitForm\" class=\"btn-botton\">发布文章</el-button>\n    </el-form>\n  </div>\n</template>\n\n<script>\n  import {quillEditor} from \"vue-quill-editor\"; //调用编辑器\n  import 'quill/dist/quill.core.css'\n  import 'quill/dist/quill.snow.css'\n  import 'quill/dist/quill.bubble.css'\n\n  export default {\n    name: 'ArticleDetail',\n    components: {quillEditor},\n    props: {\n      isEdit: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        postForm: {\n          userId: JSON.parse(localStorage.user).id,\n          topicId: '',\n          title: '',\n          summary: '',\n          thumbnail: '',\n        },\n        editorOption: {},\n        topic_list: [\n          \"Demo\", \"Demo\", \"Demo\",\n        ]\n      }\n    },\n    mounted() {\n      this.init()\n    },\n    methods: {\n      init() {\n        this.axios.get(this.GLOBAL.baseUrl + '/topic/list', {\n          params: {}\n        }).then(res => {\n          this.topic_list = res.data.data\n        });\n      },\n      submitForm() {\n        console.log(this.postForm)\n\n        this.axios.post(this.GLOBAL.baseUrl + '/article/write',this.postForm).then(res => {\n          if (this.postForm.title === '') {\n            this.$message.error('相关内容不能为空')\n            return\n          }\n          console.log(res.data);\n          if (res.data.code === 1) {\n            this.$message({\n              message: '发表成功',\n              type: 'success'\n            });\n            console.log(this.postForm.userId);\n            this.$router.push({path: '/user_detail/' + this.postForm.userId})\n          } else {\n            this.$message.error('服务器出小差，请重试');\n          }\n        });\n      },\n      onEditorReady(editor) { // 准备编辑器\n\n      },\n      onEditorBlur() {\n      }, // 失去焦点事件\n      onEditorFocus() {\n      }, // 获得焦点事件\n      onEditorChange() {\n      }, // 内容改变事件\n      uploadSuccess(response, file, fileList) {\n        console.log(response)\n        if (response.code === 0) {\n          this.postForm.thumbnail = response.msg\n          this.$message({\n            message: '上传成功',\n            type: 'success'\n          });\n        }\n      }\n    },\n    computed: {\n      editor() {\n        return this.$refs.myQuillEditor.quill;\n      }\n    }\n  }\n</script>\n\n<style scoped>\r\n\t.btn-botton {\r\n\t\t        width: 100px;\r\n\t\t\t\t  height: 50px;\r\n\t\t\t    color: #f56c6c;\r\n\t\t\t    background: rgb(232, 181, 152,0.3);\r\n\t\t\t    border: 1px solid rgb(232, 181, 152,0.3);\r\n\t\t\t    border-radius: 5px;\r\n\t\t\t    padding: 10px 25px;\r\n\t\t\t    text-align: center;\r\n\t\t\t    font-size: 16px;\r\n\t\t\t\tmargin-left: -13px;\r\n\t\t\t    -webkit-transform: scale(0.7);\r\n\t\t\t  \r\n\t\t\t\r\n\t\t}\r\n\n  .form-container {\n    margin-top: 50px;\n  }\n\n  .el-dropdown-link {\n    cursor: pointer;\n    color: #409EFF;\n  }\n\n  .el-icon-arrow-down {\n    font-size: 12px;\n  }\n</style>\n"]}]}